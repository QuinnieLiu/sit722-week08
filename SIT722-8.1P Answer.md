# Detailed documentation

## 1&2 Fork and clone the codebase
![](images/SIT722-8.1P-01-clone%20fork.png)
## 3 Key differences between two workflows

### 1. **CI/CD Separation**
- **Current Project**: Clear separation between CI (Continuous Integration) and CD (Continuous Delivery) workflows
- **chapter-8-example-3**: Combined approach - single workflow handles build, publish, and deploy

### 2. **Testing Integration**
- **Current Project**: Backend CI includes comprehensive testing with database services before building images
- **chapter-8-example-3**: No testing phase - builds and deploys without validation

### 3. **Deployment Strategy**
- **Current Project**: Manual deployment triggers (Continuous Delivery) - human approval required
- **chapter-8-example-3**: Automatic deployment on code changes (Continuous Deployment)

### 4. **Architecture Complexity**
- **Current Project**: Multi-service architecture with separate workflows for frontend/backend
- **chapter-8-example-3**: Single microservice deployment

### 5. **Error Handling & Validation**
- **Current Project**: 
  - Job dependencies ensure tests pass before building
  - LoadBalancer IP validation with timeout handling
  - Proper Azure logout in all scenarios
- **chapter-8-example-3**: Basic deployment without validation steps

### 6. **Path-based Triggering**
- **Current Project**: Smart triggering based on changed paths (frontend/** or backend/**)
- **chapter-8-example-3**: Triggers on any change to main branch

### 7. **Multi-job Orchestration**
- **Current Project**: Complex multi-job workflows with outputs and dependencies
- **chapter-8-example-3**: Single job execution

## 4 Create all required Azure resources

```sh
1. Set Variables

RESOURCE_GROUP="sit722-week08-rg"
LOCATION="australiaeast"
STORAGE_ACCOUNT="sit722week08storage"
ACR_NAME="sit722week08acr"
AKS_CLUSTER="sit722-week08-aks"
SP_NAME="sit722-week08-sp-qingliu"

2. Create Resource Group

az group create --name $RESOURCE_GROUP --location $LOCATION

3. Create Storage Account

az storage account create \
--name $STORAGE_ACCOUNT \
--resource-group $RESOURCE_GROUP \
--location $LOCATION \
--sku Standard_LRS

4. Create Azure Container Registry (ACR)

az acr create \
--resource-group $RESOURCE_GROUP \
--name $ACR_NAME \
--sku Basic \
--location $LOCATION

5. Create AKS Cluster

az aks create \
--resource-group $RESOURCE_GROUP \
--name $AKS_CLUSTER \
--node-count 2 \
--node-vm-size Standard_B2s \
--location $LOCATION \
--attach-acr $ACR_NAME \
--generate-ssh-keys

6. Create Service Principal with Owner Permission

# Get subscription ID
SUBSCRIPTION_ID=$(az account show --query id -o tsv)

# Get resource group ID  
RESOURCE_GROUP_ID=$(az group show --name $RESOURCE_GROUP --query id -o tsv)

# Create service principal with Owner role on the resource group
az ad sp create-for-rbac \
--name $SP_NAME \
--role Owner \
--scopes $RESOURCE_GROUP_ID \
--json-auth

7. Get ACR Login Server (for GitHub secrets)

az acr show --name $ACR_NAME --resource-group $RESOURCE_GROUP --query loginServer -o tsv
```
![](images/SIT722-8.1P-02-create%20resource1.png)
![](images/SIT722-8.1P-03-create%20resource2.png)
![](images/SIT722-8.1P-04-create%20resource3.png)
![](images/SIT722-8.1P-05-create%20resource4.png)

## 5 Run Backend CI and CD
![](images/SIT722-8.1P-06-be%20ci.png)
![](images/SIT722-8.1P-07-be%20cd.png)
![](images/SIT722-8.1P-08-be%20deployed.png)

## 6 Update IP address of each service in frontent via Actions
![](images/SIT722-8.1P-09-fe%20ci.png)
![](images/SIT722-8.1P-10-fe%20cd.png)
![](images/SIT722-8.1P-11-fe%20deployed.png)

## 7 Run and test completely
![](images/SIT722-8.1P-12-fe%20access.png)

## 8 Delete all resources
All Azure resources created for this task has been cleaned up.